(()=>{"use strict";class t extends HTMLElement{constructor(t,e){super(),this.name=t,this.parentComponent=null,this.shadow=this.#t(),this.styles=this.#e(e),this.wrapper=this.#s(),this.signals=null,this.shadow.appendChild(this.styles),this.shadow.appendChild(this.wrapper)}connectedCallback(){this.render()}#t(){return this.attachShadow({mode:"open"})}#s(){const t=document.createElement("div");return t.classList.add(`${this.name}-wrapper`),t.setAttribute("plan","wrapper"),t}#e(t=null){const e=document.createElement("style");if(t){const s=new XMLHttpRequest;s.open("GET",t,!1),s.send(),e.textContent=s.responseText}return e}$(t){const e=this.wrapper.querySelector(t);return e||null}$$(t){const e=this.wrapper.querySelectorAll(t);return e||null}render(){this.wrapper.innerHTML=this.template(),this.#i(),this.listeners(),this.connectors()}template(){}listeners(){}connectors(){}#i(){this.wrapper.querySelectorAll("*").forEach((t=>{t.parentComponent=this}))}}window.customElements.define("agora-component",class extends t{constructor(){super("agora-component","https://cdn.jsdelivr.net/gh/KinoGlazPrusia/agora-component@main/dist/agora-bundle.css"),this.loading=!0,this.error=null,this.domain=this.getAttribute("domain"),this.url=this.getAttribute("url"),this.contextId=Math.floor(1e4*Math.random())}template(){return`\n            <div class="loader">\n                \x3c!-- Animated circles --\x3e\n                <div class="circle" ></div>\n                <div class="circle" style="animation-delay: 50ms;"></div>\n                <div class="circle" style="animation-delay: 100ms;"></div>\n                <div class="circle" style="animation-delay: 150ms;"></div>\n                <div class="circle" style="animation-delay: 200ms;"></div>\n                <div class="circle" style="animation-delay: 250ms;"></div>\n                <div class="circle" style="animation-delay: 300ms;"></div>\n                <div class="circle" style="animation-delay: 350ms;"></div>\n            </div>\n            <iframe \n                name="${this.contextId}" \n                class="iframe" \n                src="${this.domain}${this.url.startsWith("/")?this.url:`/${this.url}`}"\n                allow="clipboard-write">\n            </iframe>\n        `}listeners(){this.setupMessageListener(),this.$("iframe").onload=()=>this.setLoading(!1)}setupMessageListener(){window.addEventListener("message",(t=>{switch(t.data.type){case"resize-on-list":if(this.contextId!==Number(t.data.id))return;if(!this.hasAttribute("auto-resize"))return;this.resize(t.data.height);break;case"resize-on-detail":if(this.contextId!==Number(t.data.id))return;if(!this.hasAttribute("auto-resize"))return;this.autoscroll(!0),this.resize(t.data.height);break;case"resize-on-detail-image-loaded":if(this.contextId!==Number(t.data.id))return;if(!this.hasAttribute("auto-resize"))return;const e=Number(this.style.height.replace("px",""))+t.data.height;this.resize(e)}}))}setLoading(t){this.loading=t,this.$(".iframe").style.display=this.loading?"none":"flex",this.$(".loader").style.display=this.loading?"flex":"none"}resize(t){this.style.height=t+"px"}autoscroll(t=!1){0!==this.parentNode.scrollTop?this.parentNode.scrollTo({top:0,behavior:""+(t?"smooth":"auto")}):this.scrollIntoView({behavior:""+(t?"smooth":"auto")})}navigateTo(t){this.setLoading(!0),this.url=t.startsWith("/")?t:`/${t}`,this.$(".iframe").src=`${this.domain}${this.url}`}})})();